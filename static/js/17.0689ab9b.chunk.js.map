{"version":3,"sources":["route/plans/detail.js","route/plans/plans.js","library/request.js","component/breadcrumb.js","component/button.js","component/infobox.js"],"names":["type","plan","amount","wallet","index","coin","useState","noBalance","setNoBalance","history","useHistory","useEffect","className","t","profit","exactMath","round","div","invest","cancelable","Alert","variant","bsPrefix","show","onClick","push","balance","id","plans","setPlans","coins","setCoins","setWallet","price","setPrice","loading","setLoading","error","setError","active","setActive","token","useStorage","setting","get","cache","then","res","success","post","temp","i","temp2","name","title","icon","forDiv","length","text","map","key","baseUrl","window","location","hostname","axiosBase","setup","axios","baseURL","timeout","validateStatus","maxAge","path","opt","a","header","data","postMessage","notify","items","form","FormData","append","login","aria-label","aria-current","props","as","animation","size","children"],"mappings":"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","file":"static/js/17.0689ab9b.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { t } from \"locales\";\r\nimport exactMath from \"exact-math\";\r\nimport Button from \"component/button\";\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nconst type = [\"danger\", \"info\", \"success\", \"light\", \"primary\"];\r\n\r\nexport default function ({ plan, amount = 0, wallet, index, coin }) {\r\n  const [noBalance, setNoBalance] = useState(false);\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    setNoBalance(false);\r\n  }, [coin]);\r\n  const onClick = () => {\r\n    if (noBalance) {\r\n      history.push(\"/wallet/\" + coin);\r\n    } else {\r\n      if (wallet?.balance > 0) {\r\n        history.push(\"/plans/\" + coin + \"/\" + plan.id);\r\n      } else setNoBalance(true);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\" col-sm-6  col-md-4 grid-margin stretch-card pricing-card\">\r\n        <div\r\n          className={\"card border-\" + type[index] + \" border pricing-card-body\"}\r\n        >\r\n          <div className=\"text-center pricing-card-head\">\r\n            <h2>{t(plan.type)}</h2>\r\n          </div>\r\n          <ul className=\"list-unstyled plan-features  p-3\">\r\n            <li>\r\n              {t(\"planProfit\")}\r\n              <h4 className=\"float-left font-weight-bold\">\r\n                % {t(plan.profit)}\r\n              </h4>\r\n            </li>\r\n            <li>\r\n              {t(\"planInvest\")}\r\n              <h4 className=\"float-left font-weight-bold text-success\">\r\n                <i className=\"mdi mdi-arrow-up\"></i>\r\n                {amount\r\n                  ? exactMath.round(exactMath.div(plan.invest, amount), -3)\r\n                  : amount}\r\n              </h4>\r\n            </li>\r\n            <li className=\"d-flex justify-content-between  w-100\">\r\n              {t(\"planCancelable\")}\r\n              <span className=\"font-weight-bold\">\r\n                <label\r\n                  className={\r\n                    \"badge \" +\r\n                    (plan.cancelable ? \"badge-success\" : \"badge-danger\")\r\n                  }\r\n                >\r\n                  {t(plan.cancelable ? \"yes\" : \"no\")}\r\n                </label>\r\n              </span>\r\n            </li>\r\n          </ul>\r\n          <div className=\"inline-absolute center text-center\">\r\n            <Alert\r\n              variant=\"warning\"\r\n              bsPrefix=\"alert alert-fill\"\r\n              show={noBalance}\r\n            >\r\n              {t(\"noBalanceDoDeposit\")}\r\n            </Alert>\r\n          </div>\r\n          <div className=\"wrapper\">\r\n            <Button\r\n              onClick={onClick}\r\n              className={\"btn btn-outline-\" + type[index] + \" btn-block\"}\r\n            >\r\n              {t(noBalance ? \"deposit\" : \"start\")}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Breadcrumb from \"component/breadcrumb\";\r\nimport { t } from \"locales\";\r\nimport { get, post } from \"library/request\";\r\nimport Spinner from \"component/spinner\";\r\nimport InfoBox from \"component/infobox\";\r\nimport useStorage from \"reducer\";\r\nimport Detail from \"./detail\";\r\n\r\nexport default function () {\r\n  const [plans, setPlans] = useState([]);\r\n  const [coins, setCoins] = useState([]);\r\n  const [wallet, setWallet] = useState({});\r\n  const [price, setPrice] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [active, setActive] = useState(\"BTC\");\r\n  const {\r\n    setting: { token },\r\n  } = useStorage();\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    get(\"plans\", { cache: true }).then((res) => {\r\n      if (res?.success) {\r\n        setPlans(res.success);\r\n      } else {\r\n        setError(true);\r\n      }\r\n    });\r\n    post(\"wallet\", { token }).then((res) => {\r\n      if (res?.success) {\r\n        let temp = {};\r\n        for (let i of res.success.wallet) {\r\n          temp[i.coin] = i;\r\n        }\r\n        setWallet(temp);\r\n        setCoins(res.success.coins);\r\n        let temp2 = {};\r\n        for (let i of res.success.coins) {\r\n          temp2[i.name] = i.price;\r\n        }\r\n        setPrice(temp2);\r\n      } else {\r\n        setError(true);\r\n      }\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <Breadcrumb title=\"plans\" icon=\"mdi-calculator\" />\r\n      {loading && <Spinner forDiv />}\r\n      {error && <InfoBox title={t(\"noData\")} />}\r\n      {plans.length > 0 && (\r\n        <>\r\n          <InfoBox title={t(\"pickPlan\")} text={t(\"pickDesc\")} />\r\n          <ul className=\"nav nav-pills nav-pills-custom\">\r\n            {coins?.map((coin, i) => (\r\n              <li className=\"nav-item\" key={i}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setActive(coin.name)}\r\n                  className={\r\n                    \"mb-2 btn \" +\r\n                    (active == coin.name\r\n                      ? \"btn-outline-danger\"\r\n                      : \"btn-outline-light\")\r\n                  }\r\n                >\r\n                  {coin.name}\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              <div className=\"row pricing-table\">\r\n                {plans.map((plan, i) => (\r\n                  <Detail\r\n                    plan={plan}\r\n                    amount={price?.[active]}\r\n                    wallet={wallet?.[active] ?? null}\r\n                    coin={active}\r\n                    index={i}\r\n                    key={i}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { setup } from \"axios-cache-adapter\";\r\nexport const baseUrl =\r\n  window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:8000/api/\"\r\n    : \"https://stronghold.live/api/\";\r\nconst axiosBase = setup({\r\n  axios,\r\n  baseURL: baseUrl,\r\n  timeout: 5000,\r\n  validateStatus: function () {\r\n    return true;\r\n  },\r\n  cache: {\r\n    maxAge: 1000,\r\n  },\r\n});\r\n\r\nexport const get = async (path, opt) => {\r\n  let header = {};\r\n  try {\r\n    if (opt?.cache) {\r\n      header.cache = {\r\n        maxAge: 10 * 60 * 1000,\r\n      };\r\n    }\r\n    const res = await axiosBase.get(path, header);\r\n    const { data } = await res;\r\n    return data;\r\n  } catch (error) {\r\n    window.postMessage({ notify: [\"error\", \"try-later\"] }, \"*\");\r\n    return await 0;\r\n  }\r\n};\r\n\r\nexport const post = async (path, items, opt) => {\r\n  let header = {};\r\n  try {\r\n    if (opt?.cache) {\r\n      header.cache = {\r\n        maxAge: 10 * 60 * 1000,\r\n      };\r\n    }\r\n    let form = new FormData();\r\n    for (let key in items) {\r\n      form.append(key, items[key]);\r\n    }\r\n    const res = axiosBase.post(path, form, header);\r\n    const { data } = await res;\r\n    if (data?.login) {\r\n      window.postMessage({ login: true }, \"*\");\r\n    }\r\n    return data;\r\n  } catch (error) {\r\n    window.postMessage({ notify: [\"error\", \"try-later\"] }, \"*\");\r\n    return await 0;\r\n  }\r\n};\r\n\r\nexport default { get, post };\r\n","import React from \"react\";\r\nimport { t } from \"locales\";\r\nexport default function ({ title, icon }) {\r\n  return (\r\n    <div className=\"page-header\">\r\n      <h3 className=\"page-title\">\r\n        <span className=\"page-title-icon bg-gradient-primary text-black mr-2\">\r\n          <i className={\"mdi \" + icon}></i>\r\n        </span>{\" \"}\r\n        {t(title)}{\" \"}\r\n      </h3>\r\n      <nav aria-label=\"breadcrumb\">\r\n        <ul className=\"breadcrumb\">\r\n          <li className=\"breadcrumb-item active\" aria-current=\"page\">\r\n            <span></span>{\" \"}\r\n            <i className=\"mdi mdi-alert-circle-outline icon-sm text-primary align-middle\"></i>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nexport default function (props) {\r\n    return (\r\n        <button className={props.className} onClick={props?.onClick}>\r\n            {props.loading\r\n                ? <Spinner\r\n                    as=\"span\"\r\n                    animation=\"border\"\r\n                    size=\"sm\"\r\n                />\r\n                : props.children\r\n            }\r\n        </button>\r\n    )\r\n};\r\n\r\n","import React from \"react\";\r\n\r\nexport default function ({ title, text }) {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12 mb-3\">\r\n        <div className=\"card card-warning\">\r\n          <div className=\"card-body\">\r\n            <div className=\"container text-center\">\r\n              {title && <h3 className=\"mb-3\">{title}</h3>}\r\n              {text && <span className=\"mx-auto\">{text}</span>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}