{"version":3,"sources":["component/infobox.js","library/timeAgo.js","route/plans/history.js","library/request.js","component/breadcrumb.js","component/button.js"],"names":["title","text","className","useTimeAgo","useStorage","setting","lang","TimeAgo","addLocale","fa","en","ar","tr","type","name","useState","invest","setInvest","loading","setLoading","error","setError","data","setData","token","timeAgo","useEffect","post","then","res","success","length","icon","forDiv","t","map","ref","i","key","onClick","plan_id","plan","coin","status","amount","profit","format","Date","created_at","getTime","show","onHide","Body","id","Footer","htmlToImage","document","getElementById","quality","dataUrl","link","createElement","download","href","click","baseUrl","window","location","hostname","axiosBase","setup","axios","baseURL","timeout","validateStatus","cache","maxAge","get","path","opt","a","header","postMessage","notify","items","form","FormData","append","login","aria-label","aria-current","props","as","animation","size","children"],"mappings":"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","file":"static/js/18.6f488abb.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function ({ title, text }) {\n  return (\n    <div className=\"row\">\n      <div className=\"col-12 mb-3\">\n        <div className=\"card card-warning\">\n          <div className=\"card-body\">\n            <div className=\"container text-center\">\n              {title && <h3 className=\"mb-3\">{title}</h3>}\n              {text && <span className=\"mx-auto\">{text}</span>}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import TimeAgo from \"javascript-time-ago\";\r\nimport fa from \"javascript-time-ago/locale/fa\";\r\nimport en from \"javascript-time-ago/locale/en\";\r\nimport ar from \"javascript-time-ago/locale/ar\";\r\nimport tr from \"javascript-time-ago/locale/tr\";\r\n\r\nimport useStorage from \"reducer\";\r\n\r\nexport default function useTimeAgo() {\r\n  const {\r\n    setting: { lang = \"fa\" },\r\n  } = useStorage();\r\n  TimeAgo.addLocale(fa);\r\n  TimeAgo.addLocale(en);\r\n  TimeAgo.addLocale(ar);\r\n  TimeAgo.addLocale(tr);\r\n  return new TimeAgo(lang);\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Breadcrumb from \"component/breadcrumb\";\r\nimport { t } from \"locales\";\r\nimport { get, post } from \"library/request\";\r\nimport Spinner from \"component/spinner\";\r\nimport InfoBox from \"component/infobox\";\r\nimport useStorage from \"reducer\";\r\nimport useTimeAgo from \"library/timeAgo\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"component/button\";\r\nimport * as htmlToImage from \"html-to-image\";\r\n\r\nconst type = [\"\", \"danger\", \"info\", \"success\", \"light\", \"primary\"];\r\n\r\nexport default function () {\r\n  const {\r\n    setting: { name },\r\n  } = useStorage();\r\n  const [invest, setInvest] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [data, setData] = useState(null);\r\n\r\n  const handleClose = () => setData(null);\r\n  const share = () => {\r\n    htmlToImage\r\n      .toJpeg(document.getElementById(\"share\"), { quality: 0.95 })\r\n      .then(function (dataUrl) {\r\n        var link = document.createElement(\"a\");\r\n        link.download = \"stronghold.live-\" + name + \".jpeg\";\r\n        link.href = dataUrl;\r\n        link.click();\r\n      });\r\n  };\r\n\r\n  const {\r\n    setting: { token },\r\n  } = useStorage();\r\n  const timeAgo = useTimeAgo();\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    post(\"invest-history\", { token }).then((res) => {\r\n      if (res?.success && res?.success?.length > 0) {\r\n        setInvest(res?.success);\r\n      } else {\r\n        setError(true);\r\n      }\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <Breadcrumb title=\"history\" icon=\"mdi-history\" />\r\n      {loading && <Spinner forDiv />}\r\n      {error && <InfoBox title={t(\"noData\")} />}\r\n      {invest.length > 0 && (\r\n        <div className=\"row\">\r\n          <div className=\"col-12 grid-margin stretch-card\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title pb-3\">{t(\"history\")}</h4>\r\n                {invest.map((ref, i) => (\r\n                  <div\r\n                    className=\"row tickets-card mx-2\"\r\n                    key={i}\r\n                    onClick={() => setData(ref)}\r\n                  >\r\n                    <div className=\"col d-flex mt-2 mb-2\">\r\n                      <div className=\"nowrap pl-3\">\r\n                        <p className=\"mb-2 font-weight-medium text-muted\">\r\n                          {t(\"planType\")}\r\n                        </p>\r\n                        <h4\r\n                          className={\r\n                            \"font-weight-semibold mb-0 text-\" +\r\n                            type[ref.plan_id]\r\n                          }\r\n                        >\r\n                          {t(ref.plan.type)}\r\n                        </h4>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col d-flex mt-2 mb-2\">\r\n                      <div className=\"nowrap pl-3\">\r\n                        <p className=\"mb-2 font-weight-medium text-muted\">\r\n                          {t(\"coinType\")}\r\n                        </p>\r\n                        <h4 className=\"font-weight-semibold mb-0 text-secondary\">\r\n                          {t(ref.coin)}\r\n                        </h4>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col d-flex mt-2 mb-2\">\r\n                      <div className=\"nowrap pl-3\">\r\n                        <p className=\"mb-2 font-weight-medium text-muted\">\r\n                          {t(\"status\")}\r\n                        </p>\r\n                        <label\r\n                          className={\r\n                            \"badge \" +\r\n                            (ref.status == \"open\"\r\n                              ? \"badge-success\"\r\n                              : \"badge-danger\")\r\n                          }\r\n                        >\r\n                          {t(ref.status)}\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col d-flex mt-2 mb-2\">\r\n                      <div className=\"nowrap pl-3\">\r\n                        <p className=\"mb-2 font-weight-medium text-muted\">\r\n                          {t(\"invest\")}\r\n                        </p>\r\n                        <h4 className=\"font-weight-semibold mb-0\">\r\n                          {ref.amount}\r\n                        </h4>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col d-flex mt-2 mb-2\">\r\n                      <div className=\"nowrap pl-3\">\r\n                        <p className=\"mb-2 font-weight-medium text-muted\">\r\n                          {t(\"profit\")}\r\n                        </p>\r\n                        <h4 className=\"font-weight-semibold mb-0 text-success\">\r\n                          {\" \"}\r\n                          {t(ref.profit)}\r\n                        </h4>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col d-flex mt-2 mb-2\">\r\n                      <div className=\"nowrap pl-3\">\r\n                        <p className=\"mb-2 font-weight-medium text-muted\">\r\n                          {t(\"startDate\")}\r\n                        </p>\r\n                        <span className=\"font-weight-semibold mb-0\">\r\n                          {timeAgo.format(new Date(ref.created_at).getTime())}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <Modal show={!!data} onHide={handleClose}>\r\n        <Modal.Body>\r\n          <div className=\"share\" id=\"share\">\r\n            <div className=\"invest\">\r\n              <span>{t(\"totalInvest\")}</span>\r\n              {data?.amount} {data?.coin}\r\n            </div>\r\n            <div className=\"profit\">\r\n              <span>{t(\"profit\")}</span>\r\n              {data?.profit} {data?.coin}\r\n            </div>\r\n            <div className=\"user\">{name}</div>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button\r\n            onClick={share}\r\n            className=\"btn btn-info btn-lg font-weight-medium w-100\"\r\n          >\r\n            {t(\"share\")}\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { setup } from \"axios-cache-adapter\";\r\nexport const baseUrl =\r\n  window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:8000/api/\"\r\n    : \"https://stronghold.live/api/\";\r\nconst axiosBase = setup({\r\n  axios,\r\n  baseURL: baseUrl,\r\n  timeout: 5000,\r\n  validateStatus: function () {\r\n    return true;\r\n  },\r\n  cache: {\r\n    maxAge: 1000,\r\n  },\r\n});\r\n\r\nexport const get = async (path, opt) => {\r\n  let header = {};\r\n  try {\r\n    if (opt?.cache) {\r\n      header.cache = {\r\n        maxAge: 10 * 60 * 1000,\r\n      };\r\n    }\r\n    const res = await axiosBase.get(path, header);\r\n    const { data } = await res;\r\n    return data;\r\n  } catch (error) {\r\n    window.postMessage({ notify: [\"error\", \"try-later\"] }, \"*\");\r\n    return await 0;\r\n  }\r\n};\r\n\r\nexport const post = async (path, items, opt) => {\r\n  let header = {};\r\n  try {\r\n    if (opt?.cache) {\r\n      header.cache = {\r\n        maxAge: 10 * 60 * 1000,\r\n      };\r\n    }\r\n    let form = new FormData();\r\n    for (let key in items) {\r\n      form.append(key, items[key]);\r\n    }\r\n    const res = axiosBase.post(path, form, header);\r\n    const { data } = await res;\r\n    if (data?.login) {\r\n      window.postMessage({ login: true }, \"*\");\r\n    }\r\n    return data;\r\n  } catch (error) {\r\n    window.postMessage({ notify: [\"error\", \"try-later\"] }, \"*\");\r\n    return await 0;\r\n  }\r\n};\r\n\r\nexport default { get, post };\r\n","import React from \"react\";\nimport { t } from \"locales\";\nexport default function ({ title, icon }) {\n  return (\n    <div className=\"page-header\">\n      <h3 className=\"page-title\">\n        <span className=\"page-title-icon bg-gradient-primary text-black mr-2\">\n          <i className={\"mdi \" + icon}></i>\n        </span>{\" \"}\n        {t(title)}{\" \"}\n      </h3>\n      <nav aria-label=\"breadcrumb\">\n        <ul className=\"breadcrumb\">\n          <li className=\"breadcrumb-item active\" aria-current=\"page\">\n            <span></span>{\" \"}\n            <i className=\"mdi mdi-alert-circle-outline icon-sm text-primary align-middle\"></i>\n          </li>\n        </ul>\n      </nav>\n    </div>\n  );\n}\n","import React from 'react';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nexport default function (props) {\r\n    return (\r\n        <button className={props.className} onClick={props?.onClick}>\r\n            {props.loading\r\n                ? <Spinner\r\n                    as=\"span\"\r\n                    animation=\"border\"\r\n                    size=\"sm\"\r\n                />\r\n                : props.children\r\n            }\r\n        </button>\r\n    )\r\n};\r\n\r\n"],"sourceRoot":""}